{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schema.yext.com/config/graph/transform",
  "$version": "1",
  "type": "object",
  "title": "Graph Transform",
  "properties": {
    "$id": {
      "type": "string",
      "minLength": 1,
      "maxLength": 64
    },
    "$schema": {
      "const": "https://schema.yext.com/config/graph/transform/v1"
    },
    "schema": {
      "type": "string",
      "format": "uri",
      "pattern": "^https://schema.yext.com/schemas/",
      "description": "Describes the schema of the data produced by this transform."
    },
    "label": {
      "type": "string",
      "description": "The label of the incoming messages this transform is applied to."
    },
    "condition": {
      "type": "string",
      "description": "A JMES predicate that determines when this transform will be applied."
    },
    "expression": {
      "type": "string",
      "description": "A JMES expression applied to the incoming document."
    },
    "applyLabels": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Labels to apply to the message generated by applying this transform."
    },
    "drop": {
      "type": "boolean",
      "description": "Whether to discard the incoming message after processing this transform, rather than propagating it to the graph as normal."
    }
  },
  "additionalProperties": false,
  "required": [
    "$id",
    "$schema",
    "schema",
    "label",
    "expression"
  ]
}